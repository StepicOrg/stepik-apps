# Stepik Extensions
## Install server
```
mkvirtualenv -p `which python3` extensions
make init
```

## Run server

```
workon extensions
python manage.py runserver
```

## Extension

Расширение представляет из себя набор шаблонов, стилей и кода js, выполняющие определенную функцию.

## Структура репозитория

`exts` — сами расширения  
`css` — стили главной страницы  
`img` — логотипы и другие изображения для главной страницы  
`js` — главный модуль Stepik Extensions (extensions.js), библтотеки, stepik-api  
`widgets` — виджеты, доступны глобально через шаблоны  

Все файлы расширения расположены в директории `exts/\<ext_id>`.

Информация обо всех расширениях содержится в файле `exts/exts.json`.

### Структура расширения

Главный модуль расширения расположен в `exts/\<ext_id>/js/content.js`

Шаблон для отображения интерфейса расширения расположен в `exts/\<ext_id>/content.html` (см. Шаблонизатор).

Стили в `exts/\<ext_id>/css/content.css`

Логотип в `exts/\<ext_id>/img/loge.png`

Главный модуль, шаблон, стили и логотип загружаются при первом открытии расширения.

### Глобальные объекты доступные расширению

`window.stepik` – объект для доступа к Stepik REST API  
`window.exts` – объект содержит информацию обо всех зарегистрированных расширениях и категориях

### Метод init

При загрузке расширение должно определить в метод `init`. Этот метод вызывается каждый раз при открытии расширения.

`window.extensions[EXT_ID].init = init;`

В нем расширение долно обновить обработчики событый. Прочитать данные из хранилища и т.д.

### Хранение данных между сессиями

Расширение нужно проектировать так, чтобы не было необходимости показывать предупреждения о наличии несохранненных данных. 

Расширение должно сохранять своё состояние между запусками.

## Widget

Готовые визуальные компоненты (шаблон + стили). Можно использовать в шаблонах расширений.

## Шаблонизатор

При загрузке шаблона расширения, он обрабатывается шаблонизатором.

Вставка виджета: `${widget.\<имя виджета>}`

Переменные: `${\<поле объекта расширения>}`

### Соглашение об именовании

#### Именование селекторов CSS

Для расширений:
`\<id расширения>-\<имя селектора>`

Для виджетов:
`\<id виджета>-\<имя селектора>`
